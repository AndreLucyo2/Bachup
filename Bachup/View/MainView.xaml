<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:model="clr-namespace:Bachup.Model"
    xmlns:vm="clr-namespace:Bachup.ViewModel"
    
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d"
    x:Class="Bachup.View.MainView"
    DataContext="{DynamicResource MainViewModel}"
    Title="Bachup" Height="729" Width="844"
    TextElement.Foreground="{DynamicResource MaterialDesignBody}"
    TextElement.FontWeight="Regular"
    TextElement.FontSize="12"
    TextOptions.TextFormattingMode="Ideal"
    TextOptions.TextRenderingMode="Auto"
    Background="{DynamicResource MaterialDesignPaper}"
    FontFamily="{DynamicResource MaterialDesignFont}"
    MinWidth="635" MinHeight="550"
    Topmost="{Binding Settings.KeepOnTop}">
    <Window.Resources>
        <vm:MainViewModel x:Key="MainViewModel"/>
    </Window.Resources>
    <materialDesign:DialogHost Identifier="RootDialog">
        <materialDesign:DrawerHost IsRightDrawerOpen="{Binding SettingsShown}" d:IsLocked="True">
            <materialDesign:DrawerHost.RightDrawerContent>
                <DockPanel MinWidth="300">
                    <Button Style="{StaticResource MaterialDesignFlatButton}" 
                            DockPanel.Dock="Top"
                            HorizontalAlignment="Right" Margin="16"
                            Command="{Binding ShowSettingsCommand}">
                        <materialDesign:PackIcon Kind="Close"/>
                    </Button>
                    <Grid 
                        ShowGridLines="False"
                        >
                        <Grid.RowDefinitions>
                            <RowDefinition Height="20"/>
                            <RowDefinition Height="35"/>
                            <RowDefinition Height="35"/>
                            <RowDefinition Height="35"/>
                            <RowDefinition Height="35"/>
                            <RowDefinition Height="35"/>
                            <RowDefinition Height="15"/>
                            <RowDefinition Height="30"/>
                            <RowDefinition Height="30"/>
                            <RowDefinition Height="30"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        <TextBlock 
                            Text="Colors"
                            Grid.Row="0"
                            Grid.Column="1"
                            VerticalAlignment="Top"
                            HorizontalAlignment="Center"
                            Style="{StaticResource MaterialDesignBody2TextBlock}"
                            />
                        <ToggleButton
                            Content=""
                            Style="{StaticResource MaterialDesignActionToggleButton}"
                            IsChecked="{Binding YellowActive}"
                            Command="{Binding SetThemeCommand}"
                            CommandParameter="{x:Static model:ThemeColors.yellow}"
                            ToolTip="Yellow"
                            Grid.Row="2"
                            Grid.Column="2"
                            Height="28"
                            Width="28">
                            <ToggleButton.Resources>
                                <ResourceDictionary>
                                    <ResourceDictionary.MergedDictionaries>
                                        <ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/Recommended/Primary/MaterialDesignColor.Yellow.xaml"/>
                                    </ResourceDictionary.MergedDictionaries>
                                </ResourceDictionary>
                            </ToggleButton.Resources>
                        </ToggleButton>
                        <ToggleButton
                            Content=""
                            Style="{StaticResource MaterialDesignActionToggleButton}"
                            ToolTip="Amber"
                            Grid.Row="2"
                            Grid.Column="1"
                            Height="28"
                            Width="28"
                            IsChecked="{Binding AmberActive}"
                            Command="{Binding SetThemeCommand}"
                            CommandParameter="{x:Static model:ThemeColors.amber}">
                            <ToggleButton.Resources>
                                <ResourceDictionary>
                                    <ResourceDictionary.MergedDictionaries>
                                        <ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/Recommended/Primary/MaterialDesignColor.Amber.xaml"/>
                                    </ResourceDictionary.MergedDictionaries>
                                </ResourceDictionary>
                            </ToggleButton.Resources>
                        </ToggleButton>
                        <ToggleButton
                            Content=""
                            Style="{StaticResource MaterialDesignActionToggleButton}"
                            ToolTip="Deep Orange"
                            Grid.Row="1"
                            Grid.Column="2"
                            Height="28"
                            Width="28"
                            IsChecked="{Binding DeepOrangeActive}"
                            Command="{Binding SetThemeCommand}"
                            CommandParameter="{x:Static model:ThemeColors.deeporange}">
                            <ToggleButton.Resources>
                                <ResourceDictionary>
                                    <ResourceDictionary.MergedDictionaries>
                                        <ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/Recommended/Primary/MaterialDesignColor.DeepOrange.xaml"/>
                                    </ResourceDictionary.MergedDictionaries>
                                </ResourceDictionary>
                            </ToggleButton.Resources>
                        </ToggleButton>
                        <ToggleButton
                            Content=""
                            Style="{StaticResource MaterialDesignActionToggleButton}"
                            ToolTip="Light Blue"
                            Grid.Row="4"
                            Grid.Column="1"
                            Height="28"
                            Width="28"
                            IsChecked="{Binding LightBlueActive}"
                            Command="{Binding SetThemeCommand}"
                            CommandParameter="{x:Static model:ThemeColors.lightblue}">
                            <ToggleButton.Resources>
                                <ResourceDictionary>
                                    <ResourceDictionary.MergedDictionaries>
                                        <ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/Recommended/Primary/MaterialDesignColor.LightBlue.xaml"/>
                                    </ResourceDictionary.MergedDictionaries>
                                </ResourceDictionary>
                            </ToggleButton.Resources>
                        </ToggleButton>
                        <ToggleButton
                            Content=""
                            Style="{StaticResource MaterialDesignActionToggleButton}"                           
                            ToolTip="Teal"
                            Grid.Row="3"
                            Grid.Column="2"
                            Height="28"
                            Width="28"
                            IsChecked="{Binding TealActive}"
                            Command="{Binding SetThemeCommand}"
                            CommandParameter="{x:Static model:ThemeColors.teal}">
                            <ToggleButton.Resources>
                                <ResourceDictionary>
                                    <ResourceDictionary.MergedDictionaries>
                                        <ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/Recommended/Primary/MaterialDesignColor.Teal.xaml"/>
                                    </ResourceDictionary.MergedDictionaries>
                                </ResourceDictionary>
                            </ToggleButton.Resources>
                        </ToggleButton>
                        <ToggleButton
                            Content=""
                            Style="{StaticResource MaterialDesignActionToggleButton}"
                            ToolTip="Cyan"
                            Grid.Row="4"
                            Grid.Column="2"
                            Height="28"
                            Width="28"
                            IsChecked="{Binding CyanActive}"
                            Command="{Binding SetThemeCommand}"
                            CommandParameter="{x:Static model:ThemeColors.cyan}">
                            <ToggleButton.Resources>
                                <ResourceDictionary>
                                    <ResourceDictionary.MergedDictionaries>
                                        <ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/Recommended/Primary/MaterialDesignColor.Cyan.xaml"/>
                                    </ResourceDictionary.MergedDictionaries>
                                </ResourceDictionary>
                            </ToggleButton.Resources>
                        </ToggleButton>
                        <ToggleButton
                            Content=""
                            Style="{StaticResource MaterialDesignActionToggleButton}"
                            ToolTip="Pink"
                            Grid.Row="1"
                            Grid.Column="1"
                            Height="28"
                            Width="28"
                            IsChecked="{Binding PinkActive}"
                            Command="{Binding SetThemeCommand}"
                            CommandParameter="{x:Static model:ThemeColors.pink}">
                            <ToggleButton.Resources>
                                <ResourceDictionary>
                                    <ResourceDictionary.MergedDictionaries>
                                        <ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/Recommended/Primary/MaterialDesignColor.Pink.xaml"/>
                                    </ResourceDictionary.MergedDictionaries>
                                </ResourceDictionary>
                            </ToggleButton.Resources>
                        </ToggleButton>
                        <ToggleButton
                            Content=""
                            Style="{StaticResource MaterialDesignActionToggleButton}"
                            ToolTip="Green"
                            Grid.Row="3"
                            Grid.Column="1"
                            Height="28"
                            Width="28"
                            IsChecked="{Binding GreenActive}"
                            Command="{Binding SetThemeCommand}"
                            CommandParameter="{x:Static model:ThemeColors.green}">
                            <ToggleButton.Resources>
                                <ResourceDictionary>
                                    <ResourceDictionary.MergedDictionaries>
                                        <ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/Recommended/Primary/MaterialDesignColor.Green.xaml"/>
                                    </ResourceDictionary.MergedDictionaries>
                                </ResourceDictionary>
                            </ToggleButton.Resources>
                        </ToggleButton>
                        <ToggleButton
                            Content=""
                            Style="{StaticResource MaterialDesignActionToggleButton}"
                            ToolTip="Deep Purple"
                            Grid.Row="5"
                            Grid.Column="1"
                            Height="28"
                            Width="28"
                            IsChecked="{Binding DeepPurpleActive}"
                            Command="{Binding SetThemeCommand}"
                            CommandParameter="{x:Static model:ThemeColors.deeppurple}">
                            <ToggleButton.Resources>
                                <ResourceDictionary>
                                    <ResourceDictionary.MergedDictionaries>
                                        <ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/Recommended/Primary/MaterialDesignColor.DeepPurple.xaml"/>
                                    </ResourceDictionary.MergedDictionaries>
                                </ResourceDictionary>
                            </ToggleButton.Resources>
                        </ToggleButton>
                        <ToggleButton
                            Content=""
                            Style="{StaticResource MaterialDesignActionToggleButton}"
                            ToolTip="Blue"
                            Grid.Row="4"
                            Grid.Column="0"
                            Height="28"
                            Width="28"
                            IsChecked="{Binding BlueActive}"
                            Command="{Binding SetThemeCommand}"
                            CommandParameter="{x:Static model:ThemeColors.blue}">
                            <ToggleButton.Resources>
                                <ResourceDictionary>
                                    <ResourceDictionary.MergedDictionaries>
                                        <ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/Recommended/Primary/MaterialDesignColor.Blue.xaml"/>
                                    </ResourceDictionary.MergedDictionaries>
                                </ResourceDictionary>
                            </ToggleButton.Resources>
                        </ToggleButton>
                        <ToggleButton
                            Content=""
                            Style="{StaticResource MaterialDesignActionToggleButton}"
                            ToolTip="Lime"
                            Grid.Row="3"
                            Grid.Column="0"
                            Height="28"
                            Width="28"
                            IsChecked="{Binding LimeActive}"
                            Command="{Binding SetThemeCommand}"
                            CommandParameter="{x:Static model:ThemeColors.lime}">
                            <ToggleButton.Resources>
                                <ResourceDictionary>
                                    <ResourceDictionary.MergedDictionaries>
                                        <ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/Recommended/Primary/MaterialDesignColor.Lime.xaml"/>
                                    </ResourceDictionary.MergedDictionaries>
                                </ResourceDictionary>
                            </ToggleButton.Resources>
                        </ToggleButton>
                        <ToggleButton
                            Content=""
                            Style="{StaticResource MaterialDesignActionToggleButton}"
                            ToolTip="Red"
                            Grid.Row="1"
                            Grid.Column="0"
                            Height="28"
                            Width="28"
                            IsChecked="{Binding RedActive}"
                            Command="{Binding SetThemeCommand}"
                            CommandParameter="{x:Static model:ThemeColors.red}">
                            <ToggleButton.Resources>
                                <ResourceDictionary>
                                    <ResourceDictionary.MergedDictionaries>
                                        <ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/Recommended/Primary/MaterialDesignColor.Red.xaml"/>
                                    </ResourceDictionary.MergedDictionaries>
                                </ResourceDictionary>
                            </ToggleButton.Resources>
                        </ToggleButton>
                        <ToggleButton
                            Content=""
                            Style="{StaticResource MaterialDesignActionToggleButton}"
                            ToolTip="Orange"
                            Grid.Row="2"
                            Grid.Column="0"
                            Height="28"
                            Width="28"
                            IsChecked="{Binding OrangeActive}"
                            Command="{Binding SetThemeCommand}"
                            CommandParameter="{x:Static model:ThemeColors.orange}">
                            <ToggleButton.Resources>
                                <ResourceDictionary>
                                    <ResourceDictionary.MergedDictionaries>
                                        <ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/Recommended/Primary/MaterialDesignColor.Orange.xaml"/>
                                    </ResourceDictionary.MergedDictionaries>
                                </ResourceDictionary>
                            </ToggleButton.Resources>
                        </ToggleButton>
                        <ToggleButton
                            Content=""
                            Style="{StaticResource MaterialDesignActionToggleButton}"
                            ToolTip="Purple"
                            Grid.Row="5"
                            Grid.Column="0"
                            Height="28"
                            Width="28"
                            IsChecked="{Binding PurpleActive}"
                            Command="{Binding SetThemeCommand}"
                            CommandParameter="{x:Static model:ThemeColors.purple}">
                            <ToggleButton.Resources>
                                <ResourceDictionary>
                                    <ResourceDictionary.MergedDictionaries>
                                        <ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/Recommended/Primary/MaterialDesignColor.Purple.xaml"/>
                                    </ResourceDictionary.MergedDictionaries>
                                </ResourceDictionary>
                            </ToggleButton.Resources>
                        </ToggleButton>
                        <TextBlock 
                            Text="{Binding ThemeName}"
                            Style="{StaticResource MaterialDesignBody2TextBlock}"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Center"
                            Grid.Column="0"
                            Grid.Row="7"
                            />
                        <ToggleButton
                            Style="{StaticResource MaterialDesignSwitchAccentToggleButton}"
                            VerticalAlignment="Center"
                            Grid.Row="8"
                            Grid.Column="0"
                            HorizontalAlignment="Center"
                            ToolTip="Toggle Color Mode"
                            IsChecked="{Binding Settings.DarkMode}"
                            Command="{Binding SetDarkModeCommand}" Width="44"/>
                        <TextBlock 
                            Text="Keep On Top"
                            Style="{StaticResource MaterialDesignBody2TextBlock}"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Center"
                            Grid.Row="7"
                            Grid.Column="1"/>
                        <ToggleButton
                            Style="{StaticResource MaterialDesignSwitchAccentToggleButton}"
                            VerticalAlignment="Center"
                            Grid.Row="8"
                            Grid.Column="1"
                            HorizontalAlignment="Center"
                            ToolTip="Toggle Color Mode"
                            IsChecked="{Binding Settings.KeepOnTop}"
                            Command="{Binding SaveSettingsCommand}"
                            Width="44"/>
                    </Grid>
                </DockPanel>
            </materialDesign:DrawerHost.RightDrawerContent>
            <Grid>
                <Grid.Resources>
                    <ResourceDictionary>
                        <ResourceDictionary.MergedDictionaries>
                            <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Button.xaml" />
                            <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.PopupBox.xaml" />
                            <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.TextBlock.xaml" />
                        </ResourceDictionary.MergedDictionaries>
                    </ResourceDictionary>
                </Grid.Resources>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="277"/>
                    <ColumnDefinition Width="559*"/>
                </Grid.ColumnDefinitions>
                <materialDesign:ColorZone
                    Mode="PrimaryMid"
                    Padding="16" Grid.ColumnSpan="2">
                    <DockPanel>
                        <Button
                            VerticalAlignment="Center"
                            DockPanel.Dock="Right"
                            Style="{StaticResource MaterialDesignToolForegroundButton}"
                            Margin="0,0,10,0"
                            Command="{Binding ShowSettingsCommand}">
                            <materialDesign:PackIcon
                                Kind="Settings" Height="24" Width="24"/>
                        </Button>
                        <Button
                            Style="{DynamicResource MaterialDesignToolForegroundButton}"
                            Margin="0 0 0 0"
                            Panel.ZIndex="0"
                            Command="{Binding AddBachupGroupCommand}">
                            <materialDesign:PackIcon
                                Kind="Plus" Height="28" Width="28"  />
                        </Button>
                        <StackPanel
                            Orientation="Horizontal"
                            materialDesign:RippleAssist.IsCentered="True"/>
                    </DockPanel>
                </materialDesign:ColorZone>
                <TreeView 
                    x:Name="treeView" 
                    Margin="0,64,0,0"
                    ItemsSource="{Binding Bachup}"
                    Background="{DynamicResource MaterialDesignFlatButtonClick}"
                    BorderBrush="{DynamicResource PrimaryHueDarkBrush}" BorderThickness="0, 0, .5, 0"            
                    >
                    <TreeView.Resources>
                        <HierarchicalDataTemplate DataType="{x:Type model:BachupGroup}" ItemsSource="{Binding BachupItems}">
                            <TextBlock Text="{Binding Name}" Style="{StaticResource MaterialDesignBody2TextBlock}"/>
                        </HierarchicalDataTemplate>
                        <DataTemplate DataType="{x:Type model:BachupItem}">
                            <TextBlock Text="{Binding Name}" Style="{StaticResource MaterialDesignBody2TextBlock}"/>
                        </DataTemplate>
                    </TreeView.Resources>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="SelectedItemChanged">
                            <i:InvokeCommandAction Command="{Binding SelectItemCommand}" CommandParameter="{Binding SelectedItem, ElementName=treeView}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TreeView>
                <ScrollViewer 
                    Margin="0,64,0,0"
                    HorizontalScrollBarVisibility="Disabled"
                
                    VerticalScrollBarVisibility="Auto" Grid.Column="1">
                    <ContentControl
                        Content="{Binding SelectedViewModel}" 
                        HorizontalContentAlignment="Center" />
                </ScrollViewer>


            </Grid>
        </materialDesign:DrawerHost>
    </materialDesign:DialogHost>
</Window>
